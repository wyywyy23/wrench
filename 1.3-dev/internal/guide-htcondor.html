<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- For Mobile Devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta name="generator" content="Doxygen 1.8.13"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <title>WRENCH: HTCondor</title>
    <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
    <link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <script type="text/javascript" src="jquery.smartmenus.js"></script>
    <!-- SmartMenus jQuery Bootstrap Addon -->
    <script type="text/javascript" src="jquery.smartmenus.bootstrap.js"></script>
    <!-- SmartMenus jQuery plugin -->
</head>
<body>
<nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <a href="http://wrench-project.org" class="navbar-brand">
                <img alt="Logo" src="logo-horizontal.png" width="160" style="float: left"/>
                1.3-dev
            </a>
        </div>
        <div id="main-nav" class="nav navbar-nav navbar-right">
            <ul class="sm sm-dox nav navbar-nav navbar-right" id="main-menu">
                <li><a href="index.html">Overview</a></li>
                <li><a href="install.html">Installation</a></li>
                <li><a href="getting-started.html">Getting Started</a></li>
                <li><a href="wrench-101.html">WRENCH 101</a></li>
                <li><a href="guide.html">Guide</a></li>
                <li><a href="annotated.html">API Reference</a></li>
                <li style="float: right">
                    <input type="hidden" id="MSearchField">
                </li>
            </ul>
        </div>
    </div>
</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div class="content" id="content">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                    <div style="margin-bottom: 15px;">
                        <!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">HTCondor </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#guide-htcondor-overview">Overview</a></li>
<li class="level1"><a href="#guide-htcondor-creating">Creating an HTCondor Service</a></li>
<li class="level1"><a href="#guide-htcondor-anatomy">Anatomy of the HTCondor Service</a></li>
</ul>
</div>
<div class="textblock"><div class="doc-type">Internal Documentation</div><div class="doc-link">Other: <a href="../user/guide-htcondor.html">User</a> - <a href="../developer/guide-htcondor.html">Developer</a></div><h1><a class="anchor" id="guide-htcondor-overview"></a>
Overview</h1>
<p><a href="http://htcondor.org">HTCondor</a> is a workload management framework that supervises task executions on local and remote resources. HTCondor is composed of six main service daemons (<code>startd</code>, <code>starter</code>, <code>schedd</code>, <code>shadow</code>, <code>negotiator</code>, and <code>collector</code>). In addition, each host on which one or more of these daemons is spawned must also run a <code>master</code> daemon, which controls the execution of all other daemons (including initialization and completion).</p>
<h1><a class="anchor" id="guide-htcondor-creating"></a>
Creating an HTCondor Service</h1>
<p>HTCondor is composed of a pool of resources in which jobs are submitted to perform their computation. In WRENCH, an HTCondor service represents a compute service (<code><a class="el" href="classwrench_1_1_compute_service.html" title="The compute service base class. ">wrench::ComputeService</a></code>), which is defined by the <code><a class="el" href="classwrench_1_1_h_t_condor_service.html" title="A workload management framework compute service. ">wrench::HTCondorService</a></code> class. An instantiation of an HTCondor service requires the following parameters:</p>
<ul>
<li>A hostname on which to start the service;</li>
<li>The HTCondor pool name;</li>
<li>A <code>std::set</code> of <code><a class="el" href="classwrench_1_1_compute_service.html" title="The compute service base class. ">wrench::ComputeService</a></code> available to the HTCondor pool; and</li>
<li>A <code>std::map</code> of properties (<code><a class="el" href="classwrench_1_1_h_t_condor_service_property.html" title="Properties for an HTCondor service. ">wrench::HTCondorServiceProperty</a></code>) and message payloads (<code><a class="el" href="classwrench_1_1_h_t_condor_service_message_payload.html" title="Configurable message payloads for an HTCondorService. ">wrench::HTCondorServiceMessagePayload</a></code>).</li>
</ul>
<p>The set of compute services may represent any computing instance natively provided by WRENCH (e.g., bare-metal servers, cloud platforms, batch-scheduled clusters, etc.) or additional services derived from the <code><a class="el" href="classwrench_1_1_compute_service.html" title="The compute service base class. ">wrench::ComputeService</a></code> base class. The example below shows how to create an instance of an HTCondor service with a pool of resources containing a <a class="el" href="guide-baremetal.html">Bare-metal</a> server:</p>
<div class="fragment"><div class="line"><span class="comment">// Simulation </span></div><div class="line"><a class="code" href="classwrench_1_1_simulation.html">wrench::Simulation</a> simulation;</div><div class="line">simulation.<a class="code" href="classwrench_1_1_simulation.html#a3c6d35f1f77f35cbc727ce31e5689992">init</a>(&amp;argc, argv);</div><div class="line"></div><div class="line"><span class="comment">// Create bare-metal server</span></div><div class="line">std::set&lt;wrench::ComputeService *&gt; compute_services;</div><div class="line">compute_services.insert(<span class="keyword">new</span> <a class="code" href="classwrench_1_1_bare_metal_compute_service.html">wrench::BareMetalComputeService</a>(</div><div class="line">          <span class="stringliteral">&quot;execution_hostname&quot;</span>,</div><div class="line">          {std::make_pair(</div><div class="line">                  <span class="stringliteral">&quot;execution_hostname&quot;</span>,</div><div class="line">                  std::make_tuple(<a class="code" href="classwrench_1_1_simulation.html#a6f0f556690d10d683a61acc3f10f5521">wrench::Simulation::getHostNumCores</a>(<span class="stringliteral">&quot;execution_hostname&quot;</span>),</div><div class="line">                                  <a class="code" href="classwrench_1_1_simulation.html#a757dde71d164a89ff52e49c4c52af0b5">wrench::Simulation::getHostMemoryCapacity</a>(<span class="stringliteral">&quot;execution_hostname&quot;</span>)))},</div><div class="line">          100000000000.0));</div><div class="line"></div><div class="line"><span class="keyword">auto</span> compute_service = simulation-&gt;<a class="code" href="classwrench_1_1_simulation.html#ad1f5c12285ecfaf5a2ce7dab5ec8b4c5">add</a>(</div><div class="line">          <span class="keyword">new</span> <a class="code" href="classwrench_1_1_h_t_condor_service.html">wrench::HTCondorService</a>(hostname, </div><div class="line">                                      <span class="stringliteral">&quot;local&quot;</span>, </div><div class="line">                                      std::move(compute_services),</div><div class="line">                                      {{<a class="code" href="classwrench_1_1_compute_service_property.html#af0abab1e3bce4932c4482031f0c31ce8">wrench::HTCondorServiceProperty::SUPPORTS_PILOT_JOBS</a>, <span class="stringliteral">&quot;false&quot;</span>}}</div><div class="line">                                      ));</div></div><!-- fragment --><h1><a class="anchor" id="guide-htcondor-anatomy"></a>
Anatomy of the HTCondor Service</h1>
<p>In WRENCH, we implement the 3 fundamental HTCondor services, implemented as particular sets of daemons. The <em>Job Execution Service</em> consists of a <code>startd</code> daemon, which adds the host on which it is running to the HTCondor pool, and of a <code>starter</code> daemon, which manages task executions on this host. The <em>Central Manager Service</em> consists of a <code>collector</code> daemon, which collects information about all other daemons, and of a <code>negotiator</code> daemon, which performs task/resource matchmaking. The <em>Job Submission Service</em> consists of a <code>schedd</code> daemon, which maintains a queue of tasks, and of several instances of a <code>shadow</code> daemon, each of which corresponds to a task submitted to the Condor pool for execution.</p>
<div class="image">
<img src="htcondor-architecture.png" alt="htcondor-architecture.png"/>
</div>
<p>&#160;</p>
<p>WRENCH HTCondor service implementation spawns two additional services during execution: <a class="el" href="classwrench_1_1_h_t_condor_central_manager_service.html">wrench::HTCondorCentralManagerService</a> and <a class="el" href="classwrench_1_1_h_t_condor_negotiator_service.html">wrench::HTCondorNegotiatorService</a>.</p>
<p>The <a class="el" href="classwrench_1_1_h_t_condor_central_manager_service.html">wrench::HTCondorCentralManagerService</a> coordinates the execution of jobs submitted to the HTCondor pool. Jobs submitted to the <a class="el" href="classwrench_1_1_h_t_condor_service.html" title="A workload management framework compute service. ">wrench::HTCondorService</a> are then queued in a <code>std::vector&lt;<a class="el" href="classwrench_1_1_standard_job.html" title="A standard (i.e., non-pilot) workflow job that can be submitted to a ComputeService by a WMS (via a J...">wrench::StandardJob</a> *&gt;</code>, which are then consumed as resources become available. The Central Manager also spawns the execution of the <a class="el" href="classwrench_1_1_h_t_condor_negotiator_service.html">wrench::HTCondorNegotiatorService</a>, which performs matchmaking between jobs and compute resources available in the pool. Note that job submission in HTCondor is asynchronous, thus our simulated services operates independent from each other (see the Interacting with services section from the Developer Documentation ). </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/>
<address class="footer">
    <small>
        Generated by &#160;<a href="http://www.doxygen.org/index.html">
        <img class="footer" src="doxygen.png" alt="doxygen"/>
    </a> 1.8.13
    </small>
</address>
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-18066333-6', 'auto');
    ga('send', 'pageview');
</script>
</body>
<script type="text/javascript" src="doxy-boot.js"></script>
</html>
